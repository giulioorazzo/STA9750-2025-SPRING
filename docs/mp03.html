<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Giulio Orazzo">
<meta name="dcterms.date" content="2025-04-20">

<title>Creating the Ultimate Playlist ‚Äì STA 9750 Submission Material</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-8ea72dc5fed832574809a9c94082fbbb.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-4418bf51ef03b784a8a869d6bbfa3ff6.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>

<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">

<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">

<script src="site_libs/datatables-binding-0.33/datatables.js"></script>

<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>

<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">

<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">

<script src="site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>

<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">

<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>


  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">STA 9750 Submission Material</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#table-of-contents" id="toc-table-of-contents" class="nav-link active" data-scroll-target="#table-of-contents">Table of Contents</a></li>
  <li><a href="#pulse-echo" id="toc-pulse-echo" class="nav-link" data-scroll-target="#pulse-echo">üéß Pulse &amp; Echo</a>
  <ul class="collapse">
  <li><a href="#the-ultimate-playlist" id="toc-the-ultimate-playlist" class="nav-link" data-scroll-target="#the-ultimate-playlist">The Ultimate Playlist</a></li>
  </ul></li>
  <li><a href="#design-principles" id="toc-design-principles" class="nav-link" data-scroll-target="#design-principles">üéØ Design Principles</a>
  <ul class="collapse">
  <li><a href="#quantitative-harmony" id="toc-quantitative-harmony" class="nav-link" data-scroll-target="#quantitative-harmony">üî¨ Quantitative Harmony</a></li>
  <li><a href="#emotional-trajectory" id="toc-emotional-trajectory" class="nav-link" data-scroll-target="#emotional-trajectory">üìà Emotional Trajectory</a></li>
  <li><a href="#data-driven-selection" id="toc-data-driven-selection" class="nav-link" data-scroll-target="#data-driven-selection">üßÆ Data-Driven Selection</a></li>
  </ul></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#data-import" id="toc-data-import" class="nav-link" data-scroll-target="#data-import">Data Acquisition</a>
  <ul class="collapse">
  <li><a href="#song-characteristics" id="toc-song-characteristics" class="nav-link" data-scroll-target="#song-characteristics">Song Characteristics</a></li>
  <li><a href="#playlist-dataset" id="toc-playlist-dataset" class="nav-link" data-scroll-target="#playlist-dataset">Playlist Dataset</a></li>
  </ul></li>
  <li><a href="#initial-exploration" id="toc-initial-exploration" class="nav-link" data-scroll-target="#initial-exploration">Initial Exploration</a></li>
  <li><a href="#Identifying-Characteristics-of-Popular-Songs" id="toc-Identifying-Characteristics-of-Popular-Songs" class="nav-link" data-scroll-target="#Identifying-Characteristics-of-Popular-Songs">Identifying Characteristics of Popular Songs</a>
  <ul class="collapse">
  <li><a href="#combining-the-datasets" id="toc-combining-the-datasets" class="nav-link" data-scroll-target="#combining-the-datasets">Combining the Datasets</a></li>
  <li><a href="#defining-popularity" id="toc-defining-popularity" class="nav-link" data-scroll-target="#defining-popularity">Defining Popularity</a></li>
  <li><a href="#is-the-popularity-column-correlated-with-the-number-of-playlist-appearances-if-so-to-what-degree" id="toc-is-the-popularity-column-correlated-with-the-number-of-playlist-appearances-if-so-to-what-degree" class="nav-link" data-scroll-target="#is-the-popularity-column-correlated-with-the-number-of-playlist-appearances-if-so-to-what-degree">Is the popularity column correlated with the number of playlist appearances? If so, to what degree?</a>
  <ul class="collapse">
  <li><a href="#the-table-below-show-the-top-5-most-popular-songs-using-popularity-index" id="toc-the-table-below-show-the-top-5-most-popular-songs-using-popularity-index" class="nav-link" data-scroll-target="#the-table-below-show-the-top-5-most-popular-songs-using-popularity-index">The table below show the <strong>Top 5</strong> most popular songs using <strong>Popularity Index</strong></a></li>
  <li><a href="#the-table-below-show-the-top-5-most-popular-songs-by-playlist-appereances" id="toc-the-table-below-show-the-top-5-most-popular-songs-by-playlist-appereances" class="nav-link" data-scroll-target="#the-table-below-show-the-top-5-most-popular-songs-by-playlist-appereances">The table below show the <strong>Top 5</strong> most popular songs by <strong>Playlist Appereances</strong></a></li>
  </ul></li>
  <li><a href="#in-what-year-were-the-most-popular-songs-released" id="toc-in-what-year-were-the-most-popular-songs-released" class="nav-link" data-scroll-target="#in-what-year-were-the-most-popular-songs-released">In what year were the most popular songs released?</a></li>
  <li><a href="#in-what-year-did-danceability-peak" id="toc-in-what-year-did-danceability-peak" class="nav-link" data-scroll-target="#in-what-year-did-danceability-peak">In what year did danceability peak?</a></li>
  <li><a href="#which-decade-is-most-represented-on-user-playlists" id="toc-which-decade-is-most-represented-on-user-playlists" class="nav-link" data-scroll-target="#which-decade-is-most-represented-on-user-playlists">Which decade is most represented on user playlists?</a></li>
  <li><a href="#graph-description-frequency-of-musical-keys-polar-plot" id="toc-graph-description-frequency-of-musical-keys-polar-plot" class="nav-link" data-scroll-target="#graph-description-frequency-of-musical-keys-polar-plot">üéµ Graph Description ‚Äì Frequency of Musical Keys (Polar Plot):</a></li>
  <li><a href="#track-duration-stats" id="toc-track-duration-stats" class="nav-link" data-scroll-target="#track-duration-stats">Track Duration Stats</a></li>
  </ul></li>
  <li><a href="#Building-a-Playlist" id="toc-Building-a-Playlist" class="nav-link" data-scroll-target="#Building-a-Playlist">üéß Building a Playlist</a>
  <ul class="collapse">
  <li><a href="#songs-with-similar-tempo-key" id="toc-songs-with-similar-tempo-key" class="nav-link" data-scroll-target="#songs-with-similar-tempo-key">üéõÔ∏è Songs with Similar Tempo &amp; Key</a></li>
  <li><a href="#songs-by-same-artists" id="toc-songs-by-same-artists" class="nav-link" data-scroll-target="#songs-by-same-artists">üé§ Songs by Same Artists</a></li>
  <li><a href="#songs-released-in-the-same-year-with-similar-characteristics" id="toc-songs-released-in-the-same-year-with-similar-characteristics" class="nav-link" data-scroll-target="#songs-released-in-the-same-year-with-similar-characteristics">üéôÔ∏è Songs released in the same year with similar characteristics</a></li>
  <li><a href="#Finding-Related-Songs" id="toc-Finding-Related-Songs" class="nav-link" data-scroll-target="#Finding-Related-Songs">üîä Finding Related Songs</a></li>
  <li><a href="#final-playlist" id="toc-final-playlist" class="nav-link" data-scroll-target="#final-playlist">üéß Final Playlist Based on Heuristics and Popularity</a></li>
  <li><a href="#analysis-of-musical-structure" id="toc-analysis-of-musical-structure" class="nav-link" data-scroll-target="#analysis-of-musical-structure">üìä Analysis of Musical Structure</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Creating the Ultimate Playlist</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Giulio Orazzo </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 20, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="table-of-contents" class="level2">
<h2 class="anchored" data-anchor-id="table-of-contents">Table of Contents</h2>
<ol type="1">
<li><a href="#introduction">Introduction</a></li>
<li><a href="#data-import">Data Acquisition</a></li>
<li><a href="#initial-exploration">Initial Exploration</a></li>
<li><a href="#Identifying-Characteristics-of-Popular-Songs">Identifying Characteristics of Popular Songs</a></li>
<li><a href="#Building-a-Playlist">Building a Playlist</a></li>
<li><a href="#Finding-Related-Songs">Finding Related Songs</a></li>
<li><a href="#final-playlist">Final Playlist</a></li>
</ol>
</section>
<section id="pulse-echo" class="level2">
<h2 class="anchored" data-anchor-id="pulse-echo">üéß Pulse &amp; Echo</h2>
<section id="the-ultimate-playlist" class="level3">
<h3 class="anchored" data-anchor-id="the-ultimate-playlist">The Ultimate Playlist</h3>
<p><em>Pulse &amp; Echo</em> is a 12-track playlist designed to guide the listener through a dynamic musical journey. The sequence weaves through smooth transitions, emotional drops, and uplifting peaks, offering both familiar favorites and new sonic discoveries. With selections spanning synthwave, pop, indie, and Latin crossover, this playlist balances mood, tempo, and energy for moments of reflection, movement, or pure vibe.</p>
<hr>
</section>
</section>
<section id="design-principles" class="level2">
<h2 class="anchored" data-anchor-id="design-principles">üéØ Design Principles</h2>
<section id="quantitative-harmony" class="level3">
<h3 class="anchored" data-anchor-id="quantitative-harmony">üî¨ Quantitative Harmony</h3>
<p>Songs were selected based on closeness in <strong>tempo</strong>, <strong>key</strong>, and compatible values for <strong>acousticness</strong>, <strong>danceability</strong>, <strong>energy</strong>, and <strong>valence</strong>. All features were compared as a percentage deviation from the average anchor song values, ensuring smooth auditory transitions.</p>
</section>
<section id="emotional-trajectory" class="level3">
<h3 class="anchored" data-anchor-id="emotional-trajectory">üìà Emotional Trajectory</h3>
<p>The playlist follows a <strong>‚Äúrise‚Äìfall‚Äìrise‚Äù</strong> pattern. It begins upbeat, dips into more introspective and atmospheric tracks midway, and picks up again with energetic closers‚Äîcreating an arc that feels cinematic and emotionally resonant.</p>
</section>
<section id="data-driven-selection" class="level3">
<h3 class="anchored" data-anchor-id="data-driven-selection">üßÆ Data-Driven Selection</h3>
<p>Tracks were selected using a multi-step filtering process based on five key heuristics:</p>
<ol type="1">
<li><strong>Co-occurrence</strong> with anchor tracks in user playlists<br>
</li>
<li><strong>Same artist</strong> connections<br>
</li>
<li><strong>Songs in the same year</strong> with similar Spotify features<br>
</li>
<li><strong>Key and tempo compatibility</strong><br>
</li>
<li><strong>Feature similarity</strong> within ¬±25% of anchor song averages</li>
</ol>
</section>
</section>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>In this mini-project, we dive into the world of music analytics to craft The Ultimate Playlist. Using real Spotify data, we analyze both song popularity and audio features to uncover the key elements that make a song stand out. By exploring patterns in user behavior and musical traits, we aim to build a playlist that captures the essence of what listeners love most. Inspired by the legendary ‚ÄúAll Rise‚Äù playlist, this project challenges you to define your own version of musical perfection.</p>
</section>
<section id="data-import" class="level1">
<h1>Data Acquisition</h1>
<section id="song-characteristics" class="level2">
<h2 class="anchored" data-anchor-id="song-characteristics">Song Characteristics</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gridExtra)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>load_songs <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(readr)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(here)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Define the directory and file path</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  dir_path <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"mp03"</span>)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  file_name <span class="ot">&lt;-</span> <span class="st">"songs.csv"</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  file_path <span class="ot">&lt;-</span> <span class="fu">file.path</span>(dir_path, file_name) </span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create directory if it doesn't exist</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(dir_path)) {</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">dir.create</span>(dir_path, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Download file only if it doesn't exist</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(file_path)) {</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    url <span class="ot">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/gabminamedez/spotify-data/refs/heads/master/data.csv"</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">download.file</span>(url, <span class="at">destfile =</span> file_path, <span class="at">method =</span> <span class="st">"auto"</span>)</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(readr)</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>  songs_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(file_path, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Optional: clean column names if necessary</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># library(janitor)</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>  <span class="co"># songs_df &lt;- clean_names(songs_df)</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(songs_df)</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>songs_df <span class="ot">&lt;-</span> <span class="fu">load_songs</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>This dataset contains audio features and metadata for a wide range of tracks. It includes details such as song name, artist(s), album, release year, and attributes like danceability, energy, and popularity. The data was downloaded from a GitHub mirror and required some cleaning‚Äîespecially the artists column, which lists multiple artists in a non-standard format. The cleaned dataset was transformed into a tidy structure, with each row representing one song-artist combination.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>clean_artist_string <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(x, <span class="st">"</span><span class="sc">\\</span><span class="st">['"</span>, <span class="st">""</span>) <span class="sc">|&gt;</span> </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">str_replace_all</span>(<span class="st">"'</span><span class="sc">\\</span><span class="st">]"</span>, <span class="st">""</span>) <span class="sc">|&gt;</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">str_replace_all</span>(<span class="st">" '"</span>, <span class="st">""</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>songs_df <span class="ot">&lt;-</span> songs_df <span class="sc">|&gt;</span> </span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate_longer_delim</span>(artists, <span class="st">","</span>) <span class="sc">|&gt;</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">artist =</span> <span class="fu">clean_artist_string</span>(artists)) <span class="sc">|&gt;</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>artists)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="playlist-dataset" class="level2">
<h2 class="anchored" data-anchor-id="playlist-dataset">Playlist Dataset</h2>
<p>This dataset is a large collection of Spotify user-generated playlists, provided as multiple JSON files. A custom function was written to responsibly download and parse the files only if not already available locally. Since the raw structure is nested and complex, the data was reshaped into a flat, rectangular format. Each row represents a single track within a playlist, including attributes like playlist name, track name, artist, album, and position within the playlist.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>load_playlists <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">n =</span> <span class="dv">10</span>) {</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  base_url <span class="ot">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/DevinOgrady/spotify_million_playlist_dataset/main/data1/"</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  dir_path <span class="ot">&lt;-</span> <span class="st">"data/mp03/playlists"</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(dir_path)) <span class="fu">dir.create</span>(dir_path, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  playlists <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">0</span><span class="sc">:</span>(n <span class="sc">-</span> <span class="dv">1</span>)) {</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    start <span class="ot">&lt;-</span> i <span class="sc">*</span> <span class="dv">1000</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    end <span class="ot">&lt;-</span> start <span class="sc">+</span> <span class="dv">999</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    file_name <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">"mpd.slice.%d-%d.json"</span>, start, end)</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    file_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(base_url, file_name)</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    file_path <span class="ot">&lt;-</span> <span class="fu">file.path</span>(dir_path, file_name)</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(file_path)) {</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">message</span>(<span class="st">"Downloading: "</span>, file_name)</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>      result <span class="ot">&lt;-</span> <span class="fu">tryCatch</span>({</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>        <span class="fu">download.file</span>(file_url, file_path, <span class="at">mode =</span> <span class="st">"wb"</span>, <span class="at">quiet =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>        <span class="cn">TRUE</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>      }, <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>        <span class="fu">message</span>(<span class="st">"Failed to download "</span>, file_name)</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>        <span class="cn">FALSE</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>      })</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="sc">!</span>result) <span class="cf">next</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">file.exists</span>(file_path)) {</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>      json_data <span class="ot">&lt;-</span> <span class="fu">tryCatch</span>({</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>        jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(file_path)</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>      }, <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>        <span class="fu">message</span>(<span class="st">"Failed to parse "</span>, file_name)</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>        <span class="cn">NULL</span></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>      })</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(json_data)) {</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>        playlists[[<span class="fu">length</span>(playlists) <span class="sc">+</span> <span class="dv">1</span>]] <span class="ot">&lt;-</span> json_data<span class="sc">$</span>playlists</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(playlists)</span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">file.exists</span>(<span class="st">"data/processed_playlists.rds"</span>)) {</span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>  playlists <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"data/processed_playlists.rds"</span>)</span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>  playlists <span class="ot">&lt;-</span> <span class="fu">load_playlists</span>(<span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">saveRDS</span>(playlists, <span class="st">"data/processed_playlists.rds"</span>)</span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>playlists <span class="ot">&lt;-</span> <span class="fu">load_playlists</span>(<span class="at">n =</span> <span class="dv">10</span>)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Provided function to clean Spotify URIs</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>strip_spotify_prefix <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_extract</span>(x, <span class="st">".*:.*:(.*)"</span>, <span class="at">group =</span> <span class="dv">1</span>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co"># building the tidy dataframe</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>rectangular_tracks_df <span class="ot">&lt;-</span> playlists[[<span class="dv">1</span>]] <span class="sc">|&gt;</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">playlist_id =</span> pid,</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">playlist_name =</span> name,</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>         <span class="at">playlist_followers =</span> num_followers) <span class="sc">|&gt;</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(playlist_id, playlist_name, playlist_followers, tracks) <span class="sc">|&gt;</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(tracks) <span class="sc">|&gt;</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">artist_id =</span> <span class="fu">strip_spotify_prefix</span>(artist_uri),</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">track_id =</span> <span class="fu">strip_spotify_prefix</span>(track_uri),</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">album_id =</span> <span class="fu">strip_spotify_prefix</span>(album_uri),</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">playlist_position =</span> <span class="fu">row_number</span>()</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">artist_name =</span> artist_name,</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">track_name =</span> track_name,</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">album_name =</span> album_name,</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">duration =</span> duration_ms</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>    playlist_name,</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>    playlist_id,</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>    playlist_position,</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>    playlist_followers,</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>    artist_name,</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>    artist_id,</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>    track_name,</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>    track_id,</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>    album_name,</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>    album_id,</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>    duration</span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="initial-exploration" class="level1">
<h1>Initial Exploration</h1>
<section id="how-many-distinct-tracks-and-artists-are-represented-in-the-playlist-data" class="level4">
<h4 class="anchored" data-anchor-id="how-many-distinct-tracks-and-artists-are-represented-in-the-playlist-data">How many distinct tracks and artists are represented in the playlist data?</h4>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>dist_artist <span class="ot">&lt;-</span> rectangular_tracks_df<span class="sc">|&gt;</span> <span class="fu">summarise</span>(</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">distinct_count =</span> <span class="fu">n_distinct</span>(artist_name)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>dist_track <span class="ot">&lt;-</span> rectangular_tracks_df<span class="sc">|&gt;</span> <span class="fu">summarise</span>(</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">distinct_count =</span> <span class="fu">n_distinct</span>(track_name)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li>There are 30049 tracks and 9722 artists in the playlist dataset.</li>
</ul>
</section>
<section id="what-are-the-5-most-popular-tracks-in-the-playlist-data" class="level4">
<h4 class="anchored" data-anchor-id="what-are-the-5-most-popular-tracks-in-the-playlist-data">What are the 5 most popular tracks in the playlist data?</h4>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>most_pop_tracks <span class="ot">&lt;-</span> rectangular_tracks_df<span class="sc">|&gt;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(track_name)<span class="sc">|&gt;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">artist_name =</span> <span class="fu">first</span>(artist_name),</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">album_name =</span> <span class="fu">first</span>(album_name),</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">track_id =</span> <span class="fu">first</span>(track_id),</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">count =</span> <span class="fu">n</span>())<span class="sc">|&gt;</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(count))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 29%">
<col style="width: 15%">
<col style="width: 23%">
<col style="width: 30%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Track Name</th>
<th style="text-align: left;">Artist</th>
<th style="text-align: left;">Album</th>
<th style="text-align: right;"># of Appereance in Playlists</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Closer</td>
<td style="text-align: left;">Ne-Yo</td>
<td style="text-align: left;">Year Of The Gentleman</td>
<td style="text-align: right;">75</td>
</tr>
<tr class="even">
<td style="text-align: left;">One Dance</td>
<td style="text-align: left;">Drake</td>
<td style="text-align: left;">Views</td>
<td style="text-align: right;">55</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HUMBLE.</td>
<td style="text-align: left;">Kendrick Lamar</td>
<td style="text-align: left;">DAMN.</td>
<td style="text-align: right;">52</td>
</tr>
<tr class="even">
<td style="text-align: left;">Ride</td>
<td style="text-align: left;">Ciara</td>
<td style="text-align: left;">Basic Instinct</td>
<td style="text-align: right;">52</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Broccoli (feat. Lil Yachty)</td>
<td style="text-align: left;">DRAM</td>
<td style="text-align: left;">Big Baby DRAM</td>
<td style="text-align: right;">50</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The table shows the 5 most popular songs, and how many time they appeared in different playlists.</p>
</section>
<section id="what-is-the-most-popular-track-in-the-playlist-data-that-does-not-have-a-corresponding-entry-in-the-song-characteristics-data" class="level4">
<h4 class="anchored" data-anchor-id="what-is-the-most-popular-track-in-the-playlist-data-that-does-not-have-a-corresponding-entry-in-the-song-characteristics-data">What is the most popular track in the playlist data that does not have a corresponding entry in the song characteristics data?</h4>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>songs_df<span class="ot">&lt;-</span> songs_df<span class="sc">|&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"track_id"</span> <span class="ot">=</span> id)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># joining the 2 datasets by the track ID </span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>joined_data <span class="ot">&lt;-</span> songs_df<span class="sc">|&gt;</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(rectangular_tracks_df, <span class="at">by =</span>  <span class="st">"track_id"</span>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>count_of_NA <span class="ot">&lt;-</span> joined_data<span class="sc">|&gt;</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">na_count =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(playlist_name)))</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Find tracks in playlists_data not present in songs</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>unmatched_tracks <span class="ot">&lt;-</span> rectangular_tracks_df <span class="sc">|&gt;</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(songs_df, <span class="at">by =</span> <span class="st">"track_id"</span>)</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Count and find the most frequent unmatched track</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>most_popular_unmatched <span class="ot">&lt;-</span> unmatched_tracks <span class="sc">|&gt;</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(track_name, artist_name, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(n, <span class="at">n =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="table table-striped table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<caption><strong><span style="font-size:18px;">Most Popular Unmatched Song</span></strong></caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Track Name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Artist Name</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Play Count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">One Dance</td>
<td style="text-align: left;">Drake</td>
<td style="text-align: right;">55</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="according-to-the-song-characteristics-data-what-is-the-most-danceable-track-how-often-does-it-appear-in-a-playlist" class="level4">
<h4 class="anchored" data-anchor-id="according-to-the-song-characteristics-data-what-is-the-most-danceable-track-how-often-does-it-appear-in-a-playlist">According to the song characteristics data, what is the most ‚Äúdanceable‚Äù track? How often does it appear in a playlist?</h4>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#get the most danceable song</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>most_danceable<span class="ot">&lt;-</span> joined_data<span class="sc">|&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(name)<span class="sc">|&gt;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(danceability))<span class="sc">|&gt;</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co"># counting number of appearences</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>dance_count<span class="ot">&lt;-</span> rectangular_tracks_df<span class="sc">|&gt;</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(track_id <span class="sc">==</span> most_danceable<span class="sc">$</span>track_id[<span class="dv">1</span>])<span class="sc">|&gt;</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">appereances =</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li>The most <strong>danceable</strong> track in the dataset is <em>Funky Cold Medina</em> by <em>Tone-Loc</em>, which appears 1 time in the playlist <em>‚ÄúVACATION‚Äù</em></li>
</ul>
</section>
<section id="which-playlist-has-the-longest-average-track-length" class="level4">
<h4 class="anchored" data-anchor-id="which-playlist-has-the-longest-average-track-length">Which playlist has the longest average track length?</h4>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>rectangular_tracks_df <span class="ot">&lt;-</span> rectangular_tracks_df<span class="sc">|&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(playlist_name)<span class="sc">|&gt;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">avg_duration =</span> <span class="fu">mean</span>(duration))<span class="sc">|&gt;</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()<span class="sc">|&gt;</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">avg_duration =</span> avg_duration <span class="sc">/</span> <span class="dv">1000</span>,  <span class="co"># converting ms to seconds</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">avg_duration_min =</span> avg_duration <span class="sc">/</span> <span class="dv">60</span>)  </span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>long_avg <span class="ot">&lt;-</span> rectangular_tracks_df<span class="sc">|&gt;</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(avg_duration)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li><strong>‚Äúclassical‚Äù</strong> is the playlist with <strong>longest average track lenght</strong>, with an average duration of 411 seconds , or about 7 minutes for each song.</li>
</ul>
</section>
<section id="what-is-the-most-popular-playlist-on-spotify" class="level4">
<h4 class="anchored" data-anchor-id="what-is-the-most-popular-playlist-on-spotify">What is the most popular playlist on Spotify?</h4>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>most_pop_play <span class="ot">&lt;-</span> rectangular_tracks_df<span class="sc">|&gt;</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(playlist_followers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li>The <strong>most popular playlist</strong> on Spotify is <strong>Tangled</strong> with 1038 followers.</li>
</ul>
</section>
</section>
<section id="Identifying-Characteristics-of-Popular-Songs" class="level1">
<h1>Identifying Characteristics of Popular Songs</h1>
<section id="combining-the-datasets" class="level2">
<h2 class="anchored" data-anchor-id="combining-the-datasets">Combining the Datasets</h2>
<p>To analyze both song characteristics and playlist behavior, we use an <code>inner_join</code> to merge the playlist and song datasets based on track IDs.</p>
<p>This approach ensures that only songs appearing in both datasets are included in our analysis. Although this results in the loss of some playlist data (since not every track has corresponding song characteristics), it allows for a cleaner dataset with complete information. Given the differences in timing and structure between the two data exports, this is the most practical solution.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># joining the 2 datasets by the track ID  using inner_join</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>inner_joined_data <span class="ot">&lt;-</span> songs_df<span class="sc">|&gt;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(rectangular_tracks_df, <span class="at">by =</span>  <span class="st">"track_id"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="defining-popularity" class="level2">
<h2 class="anchored" data-anchor-id="defining-popularity">Defining Popularity</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># defining stats using percentiles</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>popularity_stats <span class="ot">&lt;-</span> inner_joined_data <span class="sc">|&gt;</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_pop =</span> <span class="fu">min</span>(popularity),</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_pop =</span> <span class="fu">max</span>(popularity),</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_pop =</span> <span class="fu">mean</span>(popularity),</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_pop =</span> <span class="fu">median</span>(popularity),</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">p75 =</span> <span class="fu">quantile</span>(popularity, <span class="fl">0.75</span>),</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">p90 =</span> <span class="fu">quantile</span>(popularity, <span class="fl">0.90</span>)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a> popularity_stats<span class="sc">$</span>mean_pop <span class="ot">&lt;-</span> <span class="fu">round</span>(popularity_stats<span class="sc">$</span>mean_pop, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>To explore how song popularity relates to playlist appearances, we examined the distribution of the popularity variable and set a threshold to define what counts as a <strong>‚Äúpopular‚Äù</strong> songs.</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">Min</th>
<th style="text-align: right;">Max</th>
<th style="text-align: right;">Average</th>
<th style="text-align: right;">Median</th>
<th style="text-align: right;">75 Percentile</th>
<th style="text-align: right;">90 Percentile</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">6</td>
<td style="text-align: right;">92</td>
<td style="text-align: right;">63.81</td>
<td style="text-align: right;">65</td>
<td style="text-align: right;">72</td>
<td style="text-align: right;">77</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The table above shows the popularity statistics of all the tracks in the dataset. We decide to use the <em>75 Percentile</em> as a threshold to define a <strong>‚ÄúPopular Song‚Äù</strong>, and the <em>‚Äú90 Percentile‚Äù</em> as a threshold for <strong>‚ÄúVery Popular Songs‚Äù</strong>. Any track with a <strong>popularity index</strong> above 72 will be considered <strong>Popular</strong> , while any track with a <strong>popularity index</strong> above 77 will be considered <strong>Very Popular</strong>.</p>
</section>
<section id="is-the-popularity-column-correlated-with-the-number-of-playlist-appearances-if-so-to-what-degree" class="level2">
<h2 class="anchored" data-anchor-id="is-the-popularity-column-correlated-with-the-number-of-playlist-appearances-if-so-to-what-degree">Is the popularity column correlated with the number of playlist appearances? If so, to what degree?</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># counting playilist appearances in the inner_jointed dataset</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>inner_joined_data <span class="ot">&lt;-</span> inner_joined_data<span class="sc">|&gt;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(track_id)<span class="sc">|&gt;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>( <span class="at">playlist_appereance =</span> <span class="fu">n</span>())<span class="sc">|&gt;</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co"># getting the first occurence of each song</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>popular_songs <span class="ot">&lt;-</span>inner_joined_data<span class="sc">|&gt;</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(track_id)<span class="sc">|&gt;</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>)<span class="sc">|&gt;</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(popularity))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="the-table-below-show-the-top-5-most-popular-songs-using-popularity-index" class="level3">
<h3 class="anchored" data-anchor-id="the-table-below-show-the-top-5-most-popular-songs-using-popularity-index">The table below show the <strong>Top 5</strong> most popular songs using <strong>Popularity Index</strong></h3>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 14%">
<col style="width: 16%">
<col style="width: 30%">
<col style="width: 16%">
<col style="width: 23%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Song</th>
<th style="text-align: left;">Artist</th>
<th style="text-align: left;">Album Name</th>
<th style="text-align: right;">Popularity Index</th>
<th style="text-align: right;"># of Playlist Appearence</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">goosebumps</td>
<td style="text-align: left;">Travis Scott</td>
<td style="text-align: left;">Birds In The Trap Sing McKnight</td>
<td style="text-align: right;">92</td>
<td style="text-align: right;">35</td>
</tr>
<tr class="even">
<td style="text-align: left;">Play Date</td>
<td style="text-align: left;">Melanie Martinez</td>
<td style="text-align: left;">Cry Baby</td>
<td style="text-align: right;">91</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Jocelyn Flores</td>
<td style="text-align: left;">XXXTENTACION</td>
<td style="text-align: left;">17</td>
<td style="text-align: right;">87</td>
<td style="text-align: right;">11</td>
</tr>
<tr class="even">
<td style="text-align: left;">Perfect</td>
<td style="text-align: left;">Ed Sheeran</td>
<td style="text-align: left;">√∑</td>
<td style="text-align: right;">86</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Shape of You</td>
<td style="text-align: left;">Ed Sheeran</td>
<td style="text-align: left;">√∑</td>
<td style="text-align: right;">85</td>
<td style="text-align: right;">30</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="the-table-below-show-the-top-5-most-popular-songs-by-playlist-appereances" class="level3">
<h3 class="anchored" data-anchor-id="the-table-below-show-the-top-5-most-popular-songs-by-playlist-appereances">The table below show the <strong>Top 5</strong> most popular songs by <strong>Playlist Appereances</strong></h3>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 42%">
<col style="width: 8%">
<col style="width: 29%">
<col style="width: 7%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Song</th>
<th style="text-align: left;">Artist</th>
<th style="text-align: left;">Album Name</th>
<th style="text-align: right;">Popularity Index</th>
<th style="text-align: right;"># of Playlist Appearence</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">F**kin‚Äô Problems (feat. Drake, 2 Chainz &amp; Kendrick Lamar)</td>
<td style="text-align: left;">A<span class="math inline">\(AP Rocky'        |LONG.LIVE.A\)</span>AP (Deluxe Version)</td>
<td style="text-align: left;">76</td>
<td style="text-align: right;">120</td>
<td style="text-align: right;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Champions</td>
<td style="text-align: left;">Kanye West‚Äô</td>
<td style="text-align: left;">Champions</td>
<td style="text-align: right;">68</td>
<td style="text-align: right;">120</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Sucker for Pain (with Wiz Khalifa, Imagine Dragons, Logic &amp; Ty Dolla $ign feat. X Ambassadors)</td>
<td style="text-align: left;">Lil Wayne‚Äô</td>
<td style="text-align: left;">Sucker For Pain (with Logic &amp; Ty Dolla $ign feat. X Ambassadors)</td>
<td style="text-align: right;">77</td>
<td style="text-align: right;">102</td>
</tr>
<tr class="even">
<td style="text-align: left;">No Problem (feat. Lil Wayne &amp; 2 Chainz)</td>
<td style="text-align: left;">Chance the Rapper‚Äô</td>
<td style="text-align: left;">Coloring Book</td>
<td style="text-align: right;">73</td>
<td style="text-align: right;">93</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Closer</td>
<td style="text-align: left;">The Chainsmokers‚Äô</td>
<td style="text-align: left;">Closer</td>
<td style="text-align: right;">84</td>
<td style="text-align: right;">92</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>popular_songs<span class="sc">|&gt;</span> <span class="fu">ggplot</span>(</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> popularity , </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> playlist_appereance)) <span class="sc">+</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"darkblue"</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Popularity VS Playlist Appereance"</span>,</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Popularity"</span>,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Playlist Appereance"</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">15</span>)),</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">r =</span> <span class="dv">15</span>)),</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>),</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">20</span>, <span class="at">face =</span> <span class="st">"bold"</span>)</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>  ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p>The scatterplot shows a wide dispersion of points without a clear linear pattern, indicating a <strong>weak or no strong correlation</strong> between the <strong>popularity index</strong> and the number of <strong>playlist appearances</strong>. While a few popular songs do appear frequently in playlists, many others have high popularity but low appearances, or vice versa. This suggests that playlist frequency alone doesn‚Äôt strongly predict popularity.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>correlation <span class="ot">&lt;-</span><span class="fu">cor</span>(popular_songs<span class="sc">$</span>popularity, popular_songs<span class="sc">$</span>playlist_appereance, <span class="at">use =</span> <span class="st">"complete.obs"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Upon further investigation, we found that the correlation between the 2 variable is 0.38, which indicates weak correlation, and validates our original thesis.</p>
</section>
</section>
<section id="in-what-year-were-the-most-popular-songs-released" class="level2">
<h2 class="anchored" data-anchor-id="in-what-year-were-the-most-popular-songs-released">In what year were the most popular songs released?</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>pop_song_years <span class="ot">&lt;-</span> inner_joined_data <span class="sc">|&gt;</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">|&gt;</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">avg_pop =</span> <span class="fu">mean</span>(popularity, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(avg_pop))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>pop_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(pop_song_years, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> avg_pop)) <span class="sc">+</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"steelblue"</span>, <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"darkorange"</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average Popularity of Songs by Year"</span>,</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Year"</span>, <span class="at">y =</span> <span class="st">"Average Popularity"</span>) <span class="sc">+</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">14</span>)</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Table </span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>top_years_table <span class="ot">&lt;-</span> pop_song_years <span class="sc">|&gt;</span> </span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(avg_pop, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">Year =</span> year, <span class="st">`</span><span class="at">Avg Popularity</span><span class="st">`</span> <span class="ot">=</span> avg_pop)</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>top_years_table<span class="sc">$</span><span class="st">`</span><span class="at">Avg Popularity</span><span class="st">`</span><span class="ot">&lt;-</span> <span class="fu">round</span>(top_years_table<span class="sc">$</span><span class="st">`</span><span class="at">Avg Popularity</span><span class="st">`</span>, <span class="dv">2</span>)</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>table_grob <span class="ot">&lt;-</span> gridExtra<span class="sc">::</span><span class="fu">tableGrob</span>(top_years_table)</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine side-by-side</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>pop_plot <span class="sc">+</span> patchwork<span class="sc">::</span><span class="fu">wrap_elements</span>(table_grob)<span class="sc">+</span> </span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">widths =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>))  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p>The graph illustrates the average popularity of songs over time, showing a general upward trend‚Äîsuggesting that songs from more recent years tend to be more popular.</p>
<p>Next to the graph, the table displays the <strong>Top 5 Most Popular Year</strong> in which songs were released.</p>
</section>
<section id="in-what-year-did-danceability-peak" class="level2">
<h2 class="anchored" data-anchor-id="in-what-year-did-danceability-peak">In what year did danceability peak?</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculating average of dancebility for each year</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>danceability <span class="ot">&lt;-</span> inner_joined_data<span class="sc">|&gt;</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year)<span class="sc">|&gt;</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">avg_danceability =</span> <span class="fu">mean</span>(danceability))<span class="sc">|&gt;</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(avg_danceability))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>In <strong>2017</strong> we see the higher danceability score, with an index of <strong>0.71</strong>.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>danceability<span class="sc">|&gt;</span> <span class="fu">ggplot</span>(</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> year , </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> avg_danceability)) <span class="sc">+</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"darkorange"</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Linear Trend of Danceability Over Time"</span>,</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Average Danceability"</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">15</span>)),</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">r =</span> <span class="dv">15</span>)),</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>),</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">20</span>, <span class="at">face =</span> <span class="st">"bold"</span>)</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> <span class="st">"black"</span>)<span class="sc">+</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="fu">min</span>(danceability<span class="sc">$</span>year), <span class="fu">max</span>(danceability<span class="sc">$</span>year), <span class="at">by =</span> <span class="dv">10</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"danceability_plot.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>This plot visualizes the distribution of <strong>danceability</strong> of tracks across the years. Danceability measures how suitable a track is for dancing, and values range from 0 to 1. Higher values indicate that the track is more suitable for dancing. This plot illustrates an upward trend in danceability over the years, suggesting that more recent tracks tend to be increasingly suited for dancing.</p>
</section>
<section id="which-decade-is-most-represented-on-user-playlists" class="level2">
<h2 class="anchored" data-anchor-id="which-decade-is-most-represented-on-user-playlists">Which decade is most represented on user playlists?</h2>
<p>To find the <strong>most represented decades</strong> in the playlists, we group the playlist data by decade and count how many times songs from each decade appear.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># grouping by decades</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>inner_joined_data<span class="ot">&lt;-</span> inner_joined_data<span class="sc">|&gt;</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">decade =</span> <span class="fu">paste0</span>((year <span class="sc">%/%</span> <span class="dv">10</span>) <span class="sc">*</span> <span class="dv">10</span>, <span class="st">"s"</span>))</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co"># sum of appereances in playlist by decade</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>repr_decades<span class="ot">&lt;-</span> inner_joined_data<span class="sc">|&gt;</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(decade)<span class="sc">|&gt;</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_appearances =</span> <span class="fu">sum</span>(playlist_appereance, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total_appearances))<span class="sc">|&gt;</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_appearances =</span> <span class="fu">number</span>(total_appearances, <span class="at">big.mark =</span> <span class="st">","</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Decade</th>
<th style="text-align: left;">Total Appearances in Playlists</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">2010s</td>
<td style="text-align: left;">469,475</td>
</tr>
<tr class="even">
<td style="text-align: left;">2000s</td>
<td style="text-align: left;">54,649</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1990s</td>
<td style="text-align: left;">19,889</td>
</tr>
<tr class="even">
<td style="text-align: left;">1980s</td>
<td style="text-align: left;">11,031</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1970s</td>
<td style="text-align: left;">9,041</td>
</tr>
<tr class="even">
<td style="text-align: left;">1960s</td>
<td style="text-align: left;">3,733</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1940s</td>
<td style="text-align: left;">500</td>
</tr>
<tr class="even">
<td style="text-align: left;">1950s</td>
<td style="text-align: left;">223</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1930s</td>
<td style="text-align: left;">2</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="graph-description-frequency-of-musical-keys-polar-plot" class="level2">
<h2 class="anchored" data-anchor-id="graph-description-frequency-of-musical-keys-polar-plot">üéµ Graph Description ‚Äì Frequency of Musical Keys (Polar Plot):</h2>
<p>This polar plot illustrates the <strong>frequency of musical keys</strong>, represented as numbers from <strong>0 to 11</strong>, where each number corresponds to a musical key (e.g., 0 = C, 1 = C‚ôØ/D‚ô≠, 2 = D, etc.). The circular layout reflects the <strong>cyclical nature of musical keys</strong>, akin to the <strong>Circle of Fifths</strong> in music theory.</p>
<p>Each bar‚Äôs height indicates how often that key appears among the songs in user playlists. This visualization helps identify which keys are most common, offering insights into musical trends and preferences. Despite using numeric values, the cyclical arrangement of keys remains intuitive in this format.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the frequency of each key</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>key_frequency <span class="ot">&lt;-</span> inner_joined_data <span class="sc">|&gt;</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(key) <span class="sc">|&gt;</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(count))</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a polar plot</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(key_frequency, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">as.factor</span>(key), <span class="at">y =</span> count)) <span class="sc">+</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"skyblue"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="at">start =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Frequency of Musical Keys Among Songs"</span>,</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Musical Key"</span>,</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frequency"</span>) <span class="sc">+</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>),</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">20</span>, <span class="at">face =</span> <span class="st">"bold"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="track-duration-stats" class="level2">
<h2 class="anchored" data-anchor-id="track-duration-stats">Track Duration Stats</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">#convert duration in minutes </span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>inner_joined_data <span class="ot">&lt;-</span> inner_joined_data <span class="sc">|&gt;</span> </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">duration_min =</span> duration_ms <span class="sc">/</span> <span class="dv">60000</span>)</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co"># calculating mean and percentiles to see avg track length</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>length_info <span class="ot">&lt;-</span> inner_joined_data <span class="sc">|&gt;</span> </span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>( <span class="at">avg_length =</span> <span class="fu">mean</span>(duration_min),</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_length =</span> <span class="fu">median</span>(duration_min),</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">shortest =</span> <span class="fu">min</span>(duration_min),</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">longest =</span> <span class="fu">max</span>(duration_min),</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">p25 =</span> <span class="fu">quantile</span>(duration_min, <span class="fl">0.25</span>),</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">p75 =</span> <span class="fu">quantile</span>(duration_min, <span class="fl">0.75</span>)</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>length_info<span class="sc">$</span>avg_length <span class="ot">&lt;-</span> <span class="fu">round</span>(length_info<span class="sc">$</span>avg_length, <span class="dv">2</span>)</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>length_info<span class="sc">$</span>median_length <span class="ot">&lt;-</span> <span class="fu">round</span>(length_info<span class="sc">$</span>median_length, <span class="dv">2</span>)</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>length_info<span class="sc">$</span>shortest <span class="ot">&lt;-</span> <span class="fu">round</span>(length_info<span class="sc">$</span>shortest, <span class="dv">2</span>)</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>length_info<span class="sc">$</span>longest <span class="ot">&lt;-</span> <span class="fu">round</span>(length_info<span class="sc">$</span>longest, <span class="dv">2</span>)</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>length_info<span class="sc">$</span>p25 <span class="ot">&lt;-</span> <span class="fu">round</span>(length_info<span class="sc">$</span>p25, <span class="dv">2</span>)</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>length_info<span class="sc">$</span>p75 <span class="ot">&lt;-</span> <span class="fu">round</span>(length_info<span class="sc">$</span>p75, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The table below summarizes key statistics about the distribution of track lengths (in minutes) among the songs included in user playlists. It includes the <strong>average</strong> and <strong>median</strong> track length, as well as the <strong>shortest</strong> and <strong>longest</strong> tracks in the dataset. Additionally, the table shows the <strong>25th percentile</strong> and <strong>75th percentile</strong> values, which define the <strong>interquartile range (IQR)</strong> ‚Äî the range that contains the middle 50% of all track lengths.</p>
<p>We can see from the table that most tracks tend to be the range 3.4 and 4.4 minutes, suggesting a preference for mid-length songs.</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">Average</th>
<th style="text-align: right;">Median</th>
<th style="text-align: right;">Shortest</th>
<th style="text-align: right;">Longest</th>
<th style="text-align: right;">25 Percentile</th>
<th style="text-align: right;">75 Percentile</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">3.97</td>
<td style="text-align: right;">3.83</td>
<td style="text-align: right;">0.64</td>
<td style="text-align: right;">37.31</td>
<td style="text-align: right;">3.4</td>
<td style="text-align: right;">4.4</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(inner_joined_data, <span class="fu">aes</span>(<span class="at">x =</span> duration_min)) <span class="sc">+</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="fl">0.5</span>, <span class="at">fill =</span> <span class="st">"darkorange"</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Distribution of Track Lengths in User Playlists"</span>,</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Track Length (minutes)"</span>,</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Number of Songs"</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>),</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">20</span>, <span class="at">face =</span> <span class="st">"bold"</span>))<span class="sc">+</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="Building-a-Playlist" class="level1">
<h1>üéß Building a Playlist</h1>
<p>My two <strong>anchor tracks</strong> are <em>‚ÄúLook at Me‚Äù</em> by <em>XXXTentacion</em> and <em>‚Äúgoosebumps‚Äù</em> by <em>Travis Scott</em>. To find songs that work well with my anchor tracks, I first identified all playlists that contain either of the two songs I selected. Then, I looked at what other songs appear on those same playlists. This method helps surface tracks that users often group with one of my anchors, suggesting they share similar vibes, styles, or transitions‚Äîmaking them strong candidates for inclusion in a cohesive playlist.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># defining popularity level using the percentiles</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>inner_joined_data<span class="ot">&lt;-</span> inner_joined_data<span class="sc">|&gt;</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">popularity_level =</span> <span class="fu">case_when</span>(</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>      popularity <span class="sc">&gt;=</span> popularity_stats<span class="sc">$</span>p90 <span class="sc">~</span> <span class="st">"Very Popular"</span>,</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>      popularity <span class="sc">&gt;=</span> popularity_stats<span class="sc">$</span>p75 <span class="sc">~</span> <span class="st">"Popular"</span>,</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Not Popular"</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>anchor1 <span class="ot">&lt;-</span> <span class="st">"Look At Me!"</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>anchor2 <span class="ot">&lt;-</span> <span class="st">"goosebumps"</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a><span class="co"># playlists that include either song</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>playlists_with_either <span class="ot">&lt;-</span> inner_joined_data <span class="sc">|&gt;</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(anchor1, anchor2)) <span class="sc">|&gt;</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(playlist_id) <span class="sc">|&gt;</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(playlist_id)</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a><span class="co"># songs in those playlists, excluding the anchor songs</span></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>co_occurring_songs <span class="ot">&lt;-</span> inner_joined_data <span class="sc">|&gt;</span> <span class="fu">ungroup</span>()<span class="sc">|&gt;</span></span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(playlist_id <span class="sc">%in%</span> playlists_with_either,</span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>         <span class="sc">!</span>track_name <span class="sc">%in%</span> <span class="fu">c</span>(anchor1, anchor2)) <span class="sc">|&gt;</span></span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(track_name, artist_name, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption><b><span style="font-size:18px;">Top 20 Songs Commonly Appearing with Anchor Songs</span></b></caption>
<colgroup>
<col style="width: 82%">
<col style="width: 17%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Track</th>
<th style="text-align: right;">Number of Appearances</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Champions (Kanye West)</td>
<td style="text-align: right;">64</td>
</tr>
<tr class="even">
<td style="text-align: left;">No Problem (feat. Lil Wayne &amp; 2 Chainz) (Chance The Rapper)</td>
<td style="text-align: right;">48</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Congratulations (Post Malone)</td>
<td style="text-align: right;">44</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bad and Boujee (feat. Lil Uzi Vert) (Migos)</td>
<td style="text-align: right;">42</td>
</tr>
<tr class="odd">
<td style="text-align: left;">iSpy (feat. Lil Yachty) (KYLE)</td>
<td style="text-align: right;">40</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sucker For Pain (with Wiz Khalifa, Imagine Dragons, Logic &amp; Ty Dolla $ign feat. X Ambassadors) (Lil Wayne)</td>
<td style="text-align: right;">36</td>
</tr>
<tr class="odd">
<td style="text-align: left;">X (feat. Future) (21 Savage)</td>
<td style="text-align: right;">36</td>
</tr>
<tr class="even">
<td style="text-align: left;">Chill Bill (Rob <span class="math inline">\(tone)                                                                                     |                    33|
|Portland (Drake)                                                                                           |                    33|
|F**kin' Problems (A\)</span>AP Rocky)</td>
<td style="text-align: right;">32</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Drowning (feat. Kodak Black) (A Boogie Wit da Hoodie)</td>
<td style="text-align: right;">30</td>
</tr>
<tr class="even">
<td style="text-align: left;">No Hands (feat. Roscoe Dash and Wale) - Explicit Album Version (Waka Flocka Flame)</td>
<td style="text-align: right;">30</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Work REMIX (A<span class="math inline">\(AP Ferg)                                                                                     |                    30|
|It's A Vibe (2 Chainz)                                                                                     |                    28|
|pick up the phone (Young Thug)                                                                             |                    28|
|Black Beatles (Rae Sremmurd)                                                                               |                    26|
|Slippery (feat. Gucci Mane) (Migos)                                                                        |                    26|
|\)</span>ave Dat Money (feat. Fetty Wap &amp; Rich Homie Quan) (Lil Dicky)</td>
<td style="text-align: right;">24</td>
</tr>
<tr class="even">
<td style="text-align: left;">Everyday (A$AP Rocky)</td>
<td style="text-align: right;">24</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HUMBLE. (Kendrick Lamar)</td>
<td style="text-align: right;">24</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get key and tempo for the anchor songs</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>anchor1_info <span class="ot">&lt;-</span> inner_joined_data <span class="sc">|&gt;</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">==</span> anchor1) <span class="sc">|&gt;</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(key, tempo) <span class="sc">|&gt;</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>anchor2_info <span class="ot">&lt;-</span> inner_joined_data <span class="sc">|&gt;</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">==</span> anchor2) <span class="sc">|&gt;</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(key, tempo) <span class="sc">|&gt;</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="co"># songs with similar key , tempo </span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>similar_songs <span class="ot">&lt;-</span> inner_joined_data <span class="sc">|&gt;</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>track_name <span class="sc">%in%</span> anchor1 <span class="sc">&amp;</span> <span class="sc">!</span>track_name <span class="sc">%in%</span> anchor2) <span class="sc">|&gt;</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>    (key <span class="sc">==</span> anchor1_info<span class="sc">$</span>key[<span class="dv">1</span>] <span class="sc">&amp;</span> <span class="fu">abs</span>(tempo <span class="sc">-</span> anchor1_info<span class="sc">$</span>tempo[<span class="dv">1</span>]) <span class="sc">&lt;=</span> <span class="dv">5</span>) <span class="sc">|</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>    (key <span class="sc">==</span> anchor2_info<span class="sc">$</span>key[<span class="dv">1</span>] <span class="sc">&amp;</span> <span class="fu">abs</span>(tempo <span class="sc">-</span> anchor2_info<span class="sc">$</span>tempo[<span class="dv">1</span>]) <span class="sc">&lt;=</span> <span class="dv">5</span>)</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(track_name, artist_name, key, tempo) <span class="sc">|&gt;</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(key, <span class="fu">abs</span>(tempo <span class="sc">-</span> anchor1_info<span class="sc">$</span>tempo[<span class="dv">1</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="songs-with-similar-tempo-key" class="level2">
<h2 class="anchored" data-anchor-id="songs-with-similar-tempo-key">üéõÔ∏è Songs with Similar Tempo &amp; Key</h2>
<p>The table below displays 251 songs that share a similar <strong>musical key</strong> and <strong>tempo</strong> with the selected anchor songs. These characteristics are commonly used by DJs to create smooth transitions between tracks. Songs were filtered to match the same key and have a tempo within ¬±5 BPM of the anchor song, ensuring musical coherence. The results are presented in the interactive table below for easy exploration.</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-79fc055027ddaa2ca626" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-79fc055027ddaa2ca626">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251"],["No Frauds","The Fortunate","I Can Drive","Celeste","Keg in the Closet","The Goonies 'R' Good Enough","What They Want","It's Nothin - feat. 2 Chainz","Les eaux de Mars","La Bilirrubina - Live","Sober Saturday Night (feat. Vince Gill)","The Law (feat. Mac Miller &amp; Rapsody)","Te Fuiste de Aqu√≠","DNA.","Love Don't Live Here","You Really Got Me - 2015 Remastered Version","I Don't Get Tired (#IDGT) [feat. August Alsina]","Gold","Darte un Beso","Slave Master","The Town","Sinners Like Me","Not A Regular Person","Like a Cowboy","Heartbeat","Off the Wall!","Birthday Song","Gucci On My (feat. 21 Savage, YG &amp; Migos)","One Thing","Addicted To My Ex","We Still In This Bitch (feat. T.I. and Juicy J)","Lights - Bassnectar Remix","Wasted","Loud","You Say I'm in Love","Crave You - Adventure Club Remix","Black SpiderMan","Slum Anthem","Hustle Hard Remix","Ni**as In Paris","Uber Everywhere (feat. Travis Scott)","The Red","I'm so Groovy","Before I Let You Go","Centipede","I Heard Goodbye","Pretty Lady","Confessions Part II - Confessions Special Edition Version","Ordinary World","Scared to Be Lonely","Uber Everywhere","Wait And See","Rocket","The Way","Runaway","***Flawless","Promises","Like Jesus Does","Vacation","Just Another Girl","crushcrushcrush","Young Dumb &amp; Broke","Jump Out The Window","Fall For Your Type","Unchained","Grind With Me","Grind With Me","Schemin Up (feat. Drake and P. Reign)","SideLine Watching (Hold Up)","Misunderstood","Stay","Eet","Never Knew I Needed","Slippery (feat. Gucci Mane)","Do It Myself","Round Here","In Da Building (feat. Max Minelli)","Breakdown","Keep It Mello (feat. Omar LinX)","Hero","Portland","Facts (Charlie Heat Version)","Groove Witcha","Kobe","Jumpman","Diamonds Dancing","Party","Vica Versa","Shores of Waiehu","Medicated - feat. Chevy Woods &amp; Juicy J","All Of The Lights","Coleccionista de Canciones","Kodachrome","No One's Gonna Love You - Live from Spotify Sweden","Strange Things","When I Get My Hands On You","59th Street Bridge Song - Feelin' Groovy [Remastered Version]","Not Meant To Be","Drive","On My Level - feat. Too $hort","No Control","How It Was (feat. Future)","Married To The Game","White &amp; Nerdy (Parody of \"Ridin'\" by Chamillionaire feat. Krayzie Bone)","Red White &amp; Blue","The Presence of the Lord Is Here","Submersible","STFU","Rap Saved Me","I Know","Heart of Courage","Feels - Jai Wolf Remix","Summer Bummer (feat. A$AP Rocky &amp; Playboi Carti)","Drown - New","Ball and Chain","Colors - Audien Remix","Bigmouth Strikes Again - 2011 Remastered Version","Dream","Another Day","I've Got a Dream - From \"Tangled\"/Soundtrack Version","It's A Beautiful Day","Trophies","Glory And Gore","Bacon","How Low","Slow Dancing in a Burning Room","Talladega","Rude","That's What I Like","I Smile","Drivin‚Äô Around Song (feat. Jason Aldean)","Send For Me","No One Needs To Know","Found Out About You","Solo el Fin (For All We Know)","I Got A Girl","Vasos Vac√≠os - Remasterizado 2008","A Love of Your Own","China Girl - 2002 Remastered Version","sobeautiful","Deja Vu","The Business (featuring Casha)","Who's Cheatin' Who","Squeeze Box","Sideshow","Out Of Limits","Pop Style","A Little Less Sixteen Candles, A Little More \"Touch Me\"","i miss the old u","Loco","Get Ready","When You Got A Good Thing","She's Got It All","You Ain't Goin' Nowhere","Vivir sin aire","Brotha","Mentira","Supersonic","You Are More","Today 4 U","Planetary [GO!]","Drinkin' Beer And Wastin' Bullets","You Make Me Feel... - feat. Sabi","Jackson","Desire","Mine Again","Do It Again","Something To Believe In","Who Says You Can't Go Home - Duet with Jennifer Nettles of Sugarland Version","Who Were You Thinkin' Of","Cover Me","Concerning the UFO sighting near Highland, Illinois","Rollout (My Business)","Dirt","Give It All We Got Tonight","When The Day Met The Night","White Iverson","Coming of Age","By Your Side","Unforgettable","Everything Moves","Yoga","Good Times","Rechazame","Calling All Skeletons","Cut It (feat. Young Dolph)","Heavydirtysoul","All We'd Ever Need","Don't Bother","She Wolf (Falling to Pieces) [feat. Sia]","Stay","Ride","Castle","Everybody Dies In Their Nightmares","No Way","Why Won't They Talk To Me?","Don't Ask Me No Questions","Workin' Day and Night","I Love L.A.","Forever Ain't Enough","Light My Fire - Mono [Single Version]","This is Our Song","Mr. Misunderstood","Ready For Love - 2015 Remastered Version","Image Of The Invisible","Cooler Than Me","That Ain't My Truck","Gangsta","It's A Great Day To Be Alive","Water Tower","I'm In A Hurry (And Don't Know Why)","Colors","Oh","Chasing The Sun","I Want","The Call","No Plan B","Golden Days","Tango: Maureen","Uncle John's Band","Into the Night","A-Team","Celluloid Heroes - Live","Te Robar√©","Blas√© (feat. Future &amp; Rae Sremmurd) - Louis The Child Remix","Radio","We're an American Band - 2002 - Remastered","Home","You Shook Me All Night Long","My My, Hey Hey (Out of the Blue)","Bibia Be Ye Ye","One Of Those Nights","Miss You","Don't Run Away","Carry on Wayward Son","Time","Hanky Panky - Single Version","Shhh","Kill The Lights (with Nile Rodgers) - Audien Remix","lose","Salvation Song","Raging Fire","Gone Country","Daydream Believer","Miss World","Wild Thing","Amanda","I Get Lonely","Both Of Us (feat. Taylor Swift) - feat. Taylor Swift","Limbo","Owner Of A Lonely Heart"],["Nicki Minaj","Cartel","Lil Uzi Vert","Ezra Vine","Kenny Chesney","Cyndi Lauper","Russ","Wiz Khalifa","Stacey Kent","Juan Luis Guerra 4.40","Chris Young","Ab-Soul","Reik","Kendrick Lamar","Lady Antebellum","Van Halen","Kevin Gates","Chet Faker","Prince Royce","Future","The Weeknd","Eric Church","A Boogie Wit da Hoodie","Randy Houser","Carrie Underwood","XXXTENTACION","2 Chainz","Mike WiLL Made-It","Kevin Gates","M City JR","B.o.B","Ellie Goulding","Cartel","Mac Miller","Banes World","Flight Facilities","Logic","K CAMP","Ace Hood","JAY Z","MadeinTYO","Chevelle","Future","Blackstreet","Knife Party","Dan + Shay","Rebelution","Usher","Duran Duran","Martin Garrix","MadeinTYO","Iration","Beyonc√©","Jill Scott","Love and Theft","Beyonc√©","Wiz Khalifa","Eric Church","Thomas Rhett","The Killers","Paramore","Khalid","Big Sean","Jamie Foxx","Van Halen","Pretty Ricky","Pretty Ricky","OB OBrien","Lil Uzi Vert","PnB Rock","Florida Georgia Line","Regina Spektor","Ne-Yo","Migos","Russ","Florida Georgia Line","Max Minelli","Seether","Omar LinX","Skillet","Drake","Kanye West","Norm","Chief Keef","Drake","Drake","Chris Brown","Pastor Troy","Ekolu","Wiz Khalifa","Kanye West","Camila","Paul Simon","Band of Horses","Randy Newman","The New Basement Tapes","Harpers Bizarre","Theory of a Deadman","Miley Cyrus","Wiz Khalifa","One Direction","DJ Esco","Future","\"Weird Al\" Yankovic","Lynyrd Skynyrd","Byron Cage","Passafire","mansionz","21 Savage","Yo Gotti","Thomas Bergersen","Kiiara","Lana Del Rey","Bring Me The Horizon","Social Distortion","Halsey","The Smiths","Imagine Dragons","Adam Pascal","Mandy Moore","Michael Bubl√©","Young Money","Lorde","Nick Jonas","Ludacris","John Mayer","Eric Church","MAGIC!","Bruno Mars","Kirk Franklin","Colt Ford","Atlantic Starr","Shania Twain","Gin Blossoms","Astrud Gilberto","Tripping Daisy","Los Fabulosos Cadillacs","Average White Band","David Bowie","Musiq Soulchild","Post Malone","Yung Berg","Alan Jackson","The Who","Blue Magic","The Marketts","Drake","Fall Out Boy","blackbear","Enrique Iglesias","The Temptations","Lady Antebellum","Kenny Chesney","The Byrds","Man√°","Angie Stone","La Ley","J.J. Fad","Tenth Avenue North","Jesse L. Martin","My Chemical Romance","Luke Bryan","Cobra Starship","Joaquin Phoenix","Meg Myers","Mariah Carey","The Kinks","Jeremy Jordan","Bon Jovi","Texas Tornados","Candlebox","Sufjan Stevens","Ludacris","Phish","George Strait","Panic! At The Disco","Post Malone","Foster The People","Tenth Avenue North","Thomas Rhett","Bronze Radio Return","Janelle Mon√°e","All Time Low","Prince Royce","Alkaline Trio","O.T. Genasis","Twenty One Pilots","Lady Antebellum","Shakira","David Guetta","Jodeci","Ciara","Halsey","XXXTENTACION","The Naked And Famous","Tame Impala","Lynyrd Skynyrd","Michael Jackson","Randy Newman","J. Holiday","The Doors","Demi Lovato","Eric Church","Bad Company","Thrice","Mike Posner","Rhett Akins","ScHoolboy Q","Travis Tritt","Jason Aldean","Florida Georgia Line","Amos Lee","Ciara","The Wanted","One Direction","Matt Kennon","Manafest","Panic! At The Disco","Tracie Thoms","Jimmy Buffett","Santana","Travis Scott","The Kinks","Prince Royce","Ty Dolla $ign","Rancid","Grand Funk Railroad","Michael Bubl√©","AC/DC","Neil Young","Ed Sheeran","Tim McGraw","Trentem√∏ller","Tyler James Williams","Kansas","Hans Zimmer","Tommy James &amp; The Shondells","Tevin Campbell","Alex Newell","Travis Scott","The Avett Brothers","Phillip Phillips","Alan Jackson","The Monkees","Hole","Tone-Loc","Boston","Janet Jackson","B.o.B","Daddy Yankee","Yes"],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],[139.061,138.993,138.98,138.976,138.882,139.402,139.553,138.469,139.821,138.264,139.864,139.882,139.904,139.913,139.937,138.18,139.953,139.956,139.962,139.963,139.968,139.987,139.993,139.995,139.999,140.001,140.002,140.004,140.006,140.009,140.01,140.015,140.018,140.026,140.028,140.029,140.032,140.04,140.041,140.047,140.051,140.055,138.059,140.069,140.077,138.022,138.018,138.007,140.124,137.972,140.181,140.3,140.415,140.418,140.496,140.553,140.8,137.232,137.077,136.98,136.96,136.949,136.936,136.866,136.83,136.544,136.518,141.82,141.888,141.903,141.939,141.94,141.946,141.967,141.974,141.982,136.115,142.003,142.015,142.018,136.078,142.059,136.053,136.045,142.079,136.036,142.096,142.1,135.998,135.991,142.135,142.308,135.754,135.657,135.516,135.309,135.287,142.966,142.968,142.98,142.984,135.129,143.014,143.017,135.098,143.028,135.084,135.07,143.049,135.056,135.047,135.013,134.981,143.145,134.949,134.932,134.799,143.437,143.646,134.326,143.837,143.931,143.946,143.951,143.96,134.15,144.001,144.032,134.066,144.057,134.972,134.962,134.748,134.718,134.652,134.639,134.635,134.517,134.357,133.987,133.935,133.317,133.27,133.231,133.229,133.223,133.054,133.044,132.995,132.987,132.966,132.944,132.728,132.495,132.31,132.254,132.199,132.104,132.043,132.006,131.991,131.984,131.959,131.911,131.91,131.896,131.88,131.777,131.698,131.417,131.113,131.071,131.059,130.857,130.313,130.276,130.098,130.09,130.09,130.077,130.054,130.028,130.026,130.019,130.009,130,129.989,129.986,129.976,129.973,129.965,129.961,129.959,129.953,129.946,129.946,129.836,129.797,129.746,129.744,129.595,129.385,129.22,129.167,129.083,129.001,128.961,128.958,128.93,128.82,128.658,128.615,128.29,128.11,128.092,128.055,128.051,128.006,128.002,127.986,127.981,127.977,127.976,127.953,127.932,127.848,127.689,127.631,127.361,127.182,127.067,127.046,126.921,126.798,126.748,126.622,126.122,126.11,126.042,125.999,125.92,125.909,125.729,125.683,125.575,125.515,125.494,125.104,125.091,125.063,125.061]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Track Name<\/th>\n      <th>Artist<\/th>\n      <th>Key<\/th>\n      <th>Tempo<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"initComplete":"\n      function(settings, json) {\n        // Change text color of table headers and body\n        $(this.api().table().body()).css({'color': 'white'});\n        $(this.api().table().header()).css({'color': 'white'});\n\n        // Change text color of pagination buttons\n        $('.dataTables_paginate').css({'color': 'white'});\n        $('.dataTables_paginate a').css({'color': 'white'});\n\n        // Change text color of 'Show entries' dropdown and label\n        $('.dataTables_length label').css({'color': 'white'});\n        $('.dataTables_length select').css({'color': 'white', 'background-color': 'black'});\n\n        // Change text color of search box\n        $('.dataTables_filter label').css({'color': 'white'});\n        $('.dataTables_filter input').css({'color': 'white', 'background-color': 'black'});\n\n        // Change text color of info text ('Showing X to Y of Z entries')\n        $('.dataTables_info').css({'color': 'white'});\n      }\n    ","columnDefs":[{"className":"dt-right","targets":[3,4]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Track Name","targets":1},{"name":"Artist","targets":2},{"name":"Key","targets":3},{"name":"Tempo","targets":4}],"order":[],"autoWidth":false,"orderClasses":false,"rowCallback":"function(row, data, displayNum, displayIndex, dataIndex) {\nvar value=data[1]; $(this.api().cell(row, 1).node()).css({'color':'white'});\nvar value=data[2]; $(this.api().cell(row, 2).node()).css({'color':'white'});\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'color':'white'});\nvar value=data[4]; $(this.api().cell(row, 4).node()).css({'color':'white'});\n}"}},"evals":["options.initComplete","options.rowCallback"],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="songs-by-same-artists" class="level2">
<h2 class="anchored" data-anchor-id="songs-by-same-artists">üé§ Songs by Same Artists</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get the 2 artists from anchor songs</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>artist1 <span class="ot">&lt;-</span> inner_joined_data<span class="sc">|&gt;</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(track_name <span class="sc">==</span> anchor1)<span class="sc">|&gt;</span> <span class="fu">select</span>(artist_name)<span class="sc">|&gt;</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">1</span>)</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>artist2 <span class="ot">&lt;-</span> inner_joined_data<span class="sc">|&gt;</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(track_name <span class="sc">==</span> anchor2)<span class="sc">|&gt;</span> <span class="fu">select</span>(artist_name)<span class="sc">|&gt;</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">1</span>)</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="co"># songs by same artists</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>same_artists <span class="ot">&lt;-</span> inner_joined_data <span class="sc">|&gt;</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(track_name <span class="sc">%in%</span> <span class="fu">c</span>(anchor1, anchor2))) <span class="sc">|&gt;</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(artist_name <span class="sc">%in%</span> <span class="fu">c</span>(artist1, artist2)) <span class="sc">|&gt;</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(track_name, artist_name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>This table displays all songs by the same artists who performed the selected anchor songs, excluding the anchor songs themselves. These tracks were identified by matching the artist names and filtering for unique song titles. This approach highlights additional songs that share stylistic elements with the anchors, making them strong candidates for inclusion in a cohesive playlist.</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-fb6bfd1bdbf992ceac37" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-fb6bfd1bdbf992ceac37">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32"],["Piss On Your Grave","H2O","Antidote","90210","beibs in the trap","Jocelyn Flores","Fuck Love (feat. Trippie Redd)","Everybody Dies In Their Nightmares","Carry On","Mamacita","3500","through the late night","way back","wonderful","Revenge","Oh My Dis Side","Nightcrawler","Depression &amp; Obsession","the ends","A-Team","coordinate","Save Me","lose","Off the Wall!","outside","Orlando","Upper Echelon","first take","sdp interlude","Dead Inside (Interlude)","guidance","Ayala (Outro)"],["Travis Scott","XXXTENTACION","Travis Scott","Travis Scott","Travis Scott","XXXTENTACION","XXXTENTACION","XXXTENTACION","XXXTENTACION","Travis Scott","Travis Scott","Travis Scott","Travis Scott","Travis Scott","XXXTENTACION","Travis Scott","Travis Scott","XXXTENTACION","Travis Scott","Travis Scott","Travis Scott","XXXTENTACION","Travis Scott","XXXTENTACION","Travis Scott","XXXTENTACION","Travis Scott","Travis Scott","Travis Scott","XXXTENTACION","Travis Scott","XXXTENTACION"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Track Name<\/th>\n      <th>Artist<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"initComplete":"\n      function(settings, json) {\n        // Change text color of table headers and body\n        $(this.api().table().body()).css({'color': 'white'});\n        $(this.api().table().header()).css({'color': 'white'});\n\n        // Change text color of pagination buttons\n        $('.dataTables_paginate').css({'color': 'white'});\n        $('.dataTables_paginate a').css({'color': 'white'});\n\n        // Change text color of 'Show entries' dropdown and label\n        $('.dataTables_length label').css({'color': 'white'});\n        $('.dataTables_length select').css({'color': 'white', 'background-color': 'black'});\n\n        // Change text color of search box\n        $('.dataTables_filter label').css({'color': 'white'});\n        $('.dataTables_filter input').css({'color': 'white', 'background-color': 'black'});\n\n        // Change text color of info text ('Showing X to Y of Z entries')\n        $('.dataTables_info').css({'color': 'white'});\n      }\n    ","columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Track Name","targets":1},{"name":"Artist","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"rowCallback":"function(row, data, displayNum, displayIndex, dataIndex) {\nvar value=data[1]; $(this.api().cell(row, 1).node()).css({'color':'white'});\nvar value=data[2]; $(this.api().cell(row, 2).node()).css({'color':'white'});\n}"}},"evals":["options.initComplete","options.rowCallback"],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="songs-released-in-the-same-year-with-similar-characteristics" class="level2">
<h2 class="anchored" data-anchor-id="songs-released-in-the-same-year-with-similar-characteristics">üéôÔ∏è Songs released in the same year with similar characteristics</h2>
<p>To identify songs that resemble the anchor tracks in musical characteristics, we averaged the acousticness, danceability, instrumentalness, and energy of both anchor songs. We then filtered songs within ¬±25% of these average values and from the same release years. The resulting table shows songs that closely match the overall style of the selected anchors.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>year1<span class="ot">&lt;-</span> inner_joined_data<span class="sc">|&gt;</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(track_name  <span class="sc">==</span> anchor1)<span class="sc">|&gt;</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year)<span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">1</span>)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>year2<span class="ot">&lt;-</span> inner_joined_data<span class="sc">|&gt;</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(track_name  <span class="sc">==</span> anchor2)<span class="sc">|&gt;</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year)<span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">1</span>)</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="co"># update the anchor_stats</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>anchor1_stats<span class="ot">&lt;-</span> inner_joined_data<span class="sc">|&gt;</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(track_name <span class="sc">==</span> anchor1) <span class="sc">|&gt;</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">acousticness =</span> acousticness[<span class="dv">1</span>],</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">danceability =</span> danceability[<span class="dv">1</span>],</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">liveness =</span> liveness[<span class="dv">1</span>],</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">energy =</span> energy[<span class="dv">1</span>]</span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>anchor2_stats<span class="ot">&lt;-</span> inner_joined_data<span class="sc">|&gt;</span></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(track_name <span class="sc">==</span> anchor2) <span class="sc">|&gt;</span></span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">acousticness =</span> acousticness[<span class="dv">1</span>],</span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">danceability =</span> danceability[<span class="dv">1</span>],</span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">liveness =</span> liveness[<span class="dv">1</span>],</span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">energy =</span> energy[<span class="dv">1</span>]</span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-28"><a href="#cb28-28" aria-hidden="true" tabindex="-1"></a>avrg_stats <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(anchor1_stats, anchor2_stats) <span class="sc">|&gt;</span></span>
<span id="cb28-29"><a href="#cb28-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb28-30"><a href="#cb28-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">acousticness =</span> <span class="fu">mean</span>(acousticness, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb28-31"><a href="#cb28-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">danceability =</span> <span class="fu">mean</span>(danceability, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb28-32"><a href="#cb28-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">liveness =</span> <span class="fu">mean</span>(liveness, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb28-33"><a href="#cb28-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">energy =</span> <span class="fu">mean</span>(energy, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb28-34"><a href="#cb28-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-35"><a href="#cb28-35" aria-hidden="true" tabindex="-1"></a>similar_char <span class="ot">&lt;-</span> inner_joined_data<span class="sc">|&gt;</span></span>
<span id="cb28-36"><a href="#cb28-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(track_name <span class="sc">%in%</span> <span class="fu">c</span>(anchor1, anchor2)))<span class="sc">|&gt;</span></span>
<span id="cb28-37"><a href="#cb28-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>( year <span class="sc">%in%</span> <span class="fu">c</span>(year1, year2))<span class="sc">|&gt;</span></span>
<span id="cb28-38"><a href="#cb28-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb28-39"><a href="#cb28-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">abs</span>(acousticness <span class="sc">-</span> avrg_stats<span class="sc">$</span>acousticness) <span class="sc">&lt;=</span> <span class="fl">0.25</span> <span class="sc">*</span> avrg_stats<span class="sc">$</span>acousticness,</span>
<span id="cb28-40"><a href="#cb28-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">abs</span>(danceability <span class="sc">-</span> avrg_stats<span class="sc">$</span>danceability) <span class="sc">&lt;=</span> <span class="fl">0.25</span> <span class="sc">*</span> avrg_stats<span class="sc">$</span>danceability,</span>
<span id="cb28-41"><a href="#cb28-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">abs</span>(liveness <span class="sc">-</span> avrg_stats<span class="sc">$</span>liveness) <span class="sc">&lt;=</span> <span class="fl">0.25</span> <span class="sc">*</span> avrg_stats<span class="sc">$</span>liveness,</span>
<span id="cb28-42"><a href="#cb28-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">abs</span>(energy <span class="sc">-</span> avrg_stats<span class="sc">$</span>energy) <span class="sc">&lt;=</span> <span class="fl">0.25</span> <span class="sc">*</span> avrg_stats<span class="sc">$</span>energy</span>
<span id="cb28-43"><a href="#cb28-43" aria-hidden="true" tabindex="-1"></a>  )<span class="sc">|&gt;</span></span>
<span id="cb28-44"><a href="#cb28-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">everything</span>())<span class="sc">|&gt;</span></span>
<span id="cb28-45"><a href="#cb28-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(track_name, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-4fcc9e374dec70cb2093" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-4fcc9e374dec70cb2093">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27"],["0 Sentimientos (Remix) [feat. Noriel, Darkiel, Lyan, Messiah &amp; Baby Rasta]","First Time","Gravity","Kiss Goodbye","Me Enamor√©","Kitchen","Memo","You Can't Hide","Deadz (feat. 2 Chainz)","How To Love (feat. Sofia Reyes)","Reminder - Remix","Stay Together","Somebody Else","No Problem (feat. Lil Wayne &amp; 2 Chainz)","Black Beatles","Pretty Girl - Cheat Codes X CADE Remix","Buttercup","Youth","Got You On My Mind","Jump Out The Window","Star Of The Show","FEEL.","Oceans Away","T√∫ Foto","THat Part - Black Hippy Remix","Sincerely, Me","LUST."],["Jonz","Kygo","YoungBoy Never Broke Again","Cody Johnson","Shakira","Kid Cudi","Young Thug","Ck9c","Migos","Cash Cash","The Weeknd","Noah Cyrus","The 1975","Chance The Rapper","Rae Sremmurd","Maggie Lindemann","Hippo Campus","Glass Animals","NF","Big Sean","Thomas Rhett","Kendrick Lamar","A R I Z O N A","Ozuna","ScHoolboy Q","Mike Faist","Kendrick Lamar"],[0.155,0.197,0.182,0.151,0.193,0.137,0.151,0.151,0.162,0.148,0.153,0.174,0.195,0.156,0.142,0.15,0.199,0.129,0.171,0.136,0.142,0.137,0.13,0.164,0.139,0.168,0.193],[0.894,0.633,0.673,0.617,0.74,0.725,0.823,0.742,0.862,0.673,0.751,0.659,0.61,0.652,0.794,0.703,0.623,0.648,0.605,0.747,0.695,0.746,0.617,0.748,0.892,0.677,0.678],[0.154,0.099,0.119,0.107,0.09279999999999999,0.133,0.122,0.125,0.128,0.141,0.104,0.095,0.153,0.123,0.128,0.104,0.126,0.112,0.14,0.131,0.131,0.139,0.0929,0.103,0.114,0.103,0.104],[0.721,0.592,0.619,0.652,0.879,0.801,0.5639999999999999,0.552,0.785,0.894,0.654,0.589,0.788,0.795,0.632,0.868,0.763,0.718,0.5600000000000001,0.704,0.641,0.798,0.642,0.5649999999999999,0.548,0.731,0.5620000000000001],["Not Popular","Not Popular","Not Popular","Not Popular","Not Popular","Not Popular","Not Popular","Not Popular","Not Popular","Not Popular","Not Popular","Not Popular","Popular","Popular","Popular","Very Popular","Not Popular","Not Popular","Not Popular","Not Popular","Not Popular","Not Popular","Not Popular","Not Popular","Not Popular","Not Popular","Not Popular"],[2016,2017,2016,2016,2017,2016,2016,2017,2017,2016,2017,2017,2016,2016,2016,2017,2017,2016,2016,2017,2016,2017,2017,2017,2016,2017,2017]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Track Name<\/th>\n      <th>Artist<\/th>\n      <th>Acousticness<\/th>\n      <th>danceability<\/th>\n      <th>Liveness<\/th>\n      <th>Energy<\/th>\n      <th>Popularity<\/th>\n      <th>Year<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"initComplete":"\n      function(settings, json) {\n        // Change text color of table headers and body\n        $(this.api().table().body()).css({'color': 'white'});\n        $(this.api().table().header()).css({'color': 'white'});\n\n        // Change text color of pagination buttons\n        $('.dataTables_paginate').css({'color': 'white'});\n        $('.dataTables_paginate a').css({'color': 'white'});\n\n        // Change text color of 'Show entries' dropdown and label\n        $('.dataTables_length label').css({'color': 'white'});\n        $('.dataTables_length select').css({'color': 'white', 'background-color': 'black'});\n\n        // Change text color of search box\n        $('.dataTables_filter label').css({'color': 'white'});\n        $('.dataTables_filter input').css({'color': 'white', 'background-color': 'black'});\n\n        // Change text color of info text ('Showing X to Y of Z entries')\n        $('.dataTables_info').css({'color': 'white'});\n      }\n    ","columnDefs":[{"className":"dt-right","targets":[3,4,5,6,8]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Track Name","targets":1},{"name":"Artist","targets":2},{"name":"Acousticness","targets":3},{"name":"danceability","targets":4},{"name":"Liveness","targets":5},{"name":"Energy","targets":6},{"name":"Popularity","targets":7},{"name":"Year","targets":8}],"order":[],"autoWidth":false,"orderClasses":false,"rowCallback":"function(row, data, displayNum, displayIndex, dataIndex) {\n}"}},"evals":["options.initComplete","options.rowCallback"],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="Finding-Related-Songs" class="level2">
<h2 class="anchored" data-anchor-id="Finding-Related-Songs">üîä Finding Related Songs</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Getting relevant tracks from heuristics</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>relevant_tracks <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  co_occurring_songs<span class="sc">|&gt;</span> <span class="fu">select</span>(track_name),</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  same_artists<span class="sc">|&gt;</span> <span class="fu">select</span>(track_name),</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  similar_songs <span class="sc">|&gt;</span> <span class="fu">select</span>(track_name),</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  similar_char<span class="sc">|&gt;</span> <span class="fu">select</span>(track_name)</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>()</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="co"># non_popular songs</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>playlist_nonpopular <span class="ot">&lt;-</span> inner_joined_data <span class="sc">|&gt;</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">%in%</span> relevant_tracks<span class="sc">$</span>track_name) <span class="sc">|&gt;</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(popularity_level <span class="sc">==</span> <span class="st">"Not Popular"</span>)<span class="sc">|&gt;</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, artist_name, popularity_level)<span class="sc">|&gt;</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a><span class="co">#popular songs</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>playlist_popular <span class="ot">&lt;-</span> inner_joined_data <span class="sc">|&gt;</span></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">%in%</span> relevant_tracks<span class="sc">$</span>track_name) <span class="sc">|&gt;</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(popularity_level <span class="sc">==</span> <span class="st">"Very Popular"</span> <span class="sc">|</span></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>           popularity_level <span class="sc">==</span> <span class="st">"Popular"</span>)<span class="sc">|&gt;</span></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, artist_name, popularity_level)<span class="sc">|&gt;</span></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a><span class="co"># getting 8 Non popular songs, 6 popular songs, 6 Very popular songs</span></span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>fin_playlist <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>  playlist_nonpopular<span class="sc">|&gt;</span> <span class="fu">sample_n</span>(<span class="dv">8</span>),</span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>  playlist_popular<span class="sc">|&gt;</span> <span class="fu">filter</span>(popularity_level <span class="sc">==</span> <span class="st">"Popular"</span>)<span class="sc">|&gt;</span></span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sample_n</span>(<span class="dv">6</span>),</span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a>  playlist_popular<span class="sc">|&gt;</span> <span class="fu">filter</span>(popularity_level <span class="sc">==</span> <span class="st">"Very Popular"</span>)<span class="sc">|&gt;</span></span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sample_n</span>(<span class="dv">6</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>To build a well-rounded and personalized playlist, we began by identifying <strong>relevant tracks</strong> using several heuristic methods based on my two anchor songs:</p>
<ul>
<li><strong>Co-occurring songs</strong> that frequently appear in the same playlists.</li>
<li><strong>Tracks by the same artists</strong> as the anchor songs.</li>
<li><strong>Songs with a similar musical key and tempo</strong>, which would allow for smoother DJ transitions.</li>
<li><strong>Songs with similar audio characteristics</strong>, such as acousticness, danceability, energy, and liveness.</li>
</ul>
<p>These heuristics were combined into a single list of <code>relevant_tracks</code>, ensuring only distinct track names were included.</p>
<p>Next, I categorized the songs by <strong>popularity level</strong>: - <strong>Not Popular</strong> - <strong>Popular</strong> - <strong>Very Popular</strong></p>
<p>Finally, I curated a <strong>final playlist</strong> by sampling:</p>
<ul>
<li>üé∂ 8 non-popular songs<br>
</li>
<li>üé∂ 6 popular songs<br>
</li>
<li>üé∂ 6 very popular songs</li>
</ul>
<p>This approach creates a balanced and diverse playlist, mixing well-known hits with lesser-known tracks that share musical and stylistic traits with the anchor songs.</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-0d4b3062d501344c5f34" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-0d4b3062d501344c5f34">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"],["Why Won't They Talk To Me?","T-Shirt","Free Smoke","These Days","Stick Talk","Miss World","Outside","Provider","Kiss Me Thru The Phone","Take Care","Tunnel Vision","Neighbors","679 (feat. Remy Boyz)","I Write Sins Not Tragedies","Feel It Still","Electric Love","Waves - Robin Schulz Radio Edit","The Real Slim Shady","Body Like A Back Road","Location"],["Tame Impala","Migos","Drake","Foo Fighters","Future","Hole","The Weeknd","Frank Ocean","Soulja Boy","Drake","Kodak Black","J. Cole","Fetty Wap","Panic! At The Disco","Portugal. The Man","B√òRNS","Mr. Probz","Eminem","Sam Hunt","Khalid"],["Not Popular","Not Popular","Not Popular","Not Popular","Not Popular","Not Popular","Not Popular","Not Popular","Popular","Popular","Popular","Popular","Popular","Popular","Very Popular","Very Popular","Very Popular","Very Popular","Very Popular","Very Popular"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>name<\/th>\n      <th>artist_name<\/th>\n      <th>popularity_level<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"initComplete":"\n      function(settings, json) {\n        // Change text color of table headers and body\n        $(this.api().table().body()).css({'color': 'white'});\n        $(this.api().table().header()).css({'color': 'white'});\n\n        // Change text color of pagination buttons\n        $('.dataTables_paginate').css({'color': 'white'});\n        $('.dataTables_paginate a').css({'color': 'white'});\n\n        // Change text color of 'Show entries' dropdown and label\n        $('.dataTables_length label').css({'color': 'white'});\n        $('.dataTables_length select').css({'color': 'white', 'background-color': 'black'});\n\n        // Change text color of search box\n        $('.dataTables_filter label').css({'color': 'white'});\n        $('.dataTables_filter input').css({'color': 'white', 'background-color': 'black'});\n\n        // Change text color of info text ('Showing X to Y of Z entries')\n        $('.dataTables_info').css({'color': 'white'});\n      }\n    ","columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"name","targets":1},{"name":"artist_name","targets":2},{"name":"popularity_level","targets":3}],"order":[],"autoWidth":false,"orderClasses":false,"rowCallback":"function(row, data, displayNum, displayIndex, dataIndex) {\n}"}},"evals":["options.initComplete","options.rowCallback"],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="final-playlist" class="level2">
<h2 class="anchored" data-anchor-id="final-playlist">üéß Final Playlist Based on Heuristics and Popularity</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>fin_playlist_12 <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  playlist_nonpopular <span class="sc">|&gt;</span> <span class="fu">sample_n</span>(<span class="dv">4</span>),</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  playlist_popular <span class="sc">|&gt;</span> <span class="fu">filter</span>(popularity_level <span class="sc">==</span> <span class="st">"Popular"</span>) <span class="sc">|&gt;</span> <span class="fu">sample_n</span>(<span class="dv">4</span>),</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  playlist_popular <span class="sc">|&gt;</span> <span class="fu">filter</span>(popularity_level <span class="sc">==</span> <span class="st">"Very Popular"</span>) <span class="sc">|&gt;</span> <span class="fu">sample_n</span>(<span class="dv">4</span>)</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="co"># audio features for visualization</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>playlist_features <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(fin_playlist_12, inner_joined_data, </span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>                                <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"name"</span> <span class="ot">=</span> <span class="st">"name"</span>, <span class="st">"artist_name"</span> <span class="ot">=</span> <span class="st">"artist_name"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(name, artist_name, acousticness, energy, danceability, tempo, popularity) <span class="sc">|&gt;</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">order =</span> <span class="fu">row_number</span>())</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting evolution</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>playlist_features_long <span class="ot">&lt;-</span> playlist_features <span class="sc">|&gt;</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(order, name, acousticness, energy, danceability, tempo) <span class="sc">|&gt;</span></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span><span class="fu">c</span>(order, name), <span class="at">names_to =</span> <span class="st">"feature"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-01257f2cab6d12a23141" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-01257f2cab6d12a23141">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12"],["GOD.","Dirt","Checc Me out (feat. Cobby Supreme &amp; Dom Kennedy)","Gangsta","Self Control","Jumpman","Revenge","Trap Queen","That's What I Like","Six Feet Under","Go Flex","HUMBLE."],["Kendrick Lamar","Phish","Nipsey Hussle","ScHoolboy Q","Frank Ocean","Drake","XXXTENTACION","Fetty Wap","Bruno Mars","Billie Eilish","Post Malone","Kendrick Lamar"],["Not Popular","Not Popular","Not Popular","Not Popular","Popular","Popular","Popular","Popular","Very Popular","Very Popular","Very Popular","Very Popular"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>name<\/th>\n      <th>artist_name<\/th>\n      <th>popularity_level<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":12,"initComplete":"\n      function(settings, json) {\n        // Change text color of table headers and body\n        $(this.api().table().body()).css({'color': 'white'});\n        $(this.api().table().header()).css({'color': 'white'});\n\n        // Change text color of pagination buttons\n        $('.dataTables_paginate').css({'color': 'white'});\n        $('.dataTables_paginate a').css({'color': 'white'});\n\n        // Change text color of 'Show entries' dropdown and label\n        $('.dataTables_length label').css({'color': 'white'});\n        $('.dataTables_length select').css({'color': 'white', 'background-color': 'black'});\n\n        // Change text color of search box\n        $('.dataTables_filter label').css({'color': 'white'});\n        $('.dataTables_filter input').css({'color': 'white', 'background-color': 'black'});\n\n        // Change text color of info text ('Showing X to Y of Z entries')\n        $('.dataTables_info').css({'color': 'white'});\n      }\n    ","columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"name","targets":1},{"name":"artist_name","targets":2},{"name":"popularity_level","targets":3}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,12,25,50,100],"rowCallback":"function(row, data, displayNum, displayIndex, dataIndex) {\n}"}},"evals":["options.initComplete","options.rowCallback"],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="analysis-of-musical-structure" class="level2">
<h2 class="anchored" data-anchor-id="analysis-of-musical-structure">üìä Analysis of Musical Structure</h2>
<p>To understand the sonic journey of my playlist ‚ÄúPulse &amp; Echo‚Äù, I analyzed the evolution of key audio features provided by Spotify. These features include:</p>
<ul>
<li><p>Acousticness: Likelihood that a track is acoustic.</p></li>
<li><p>Energy: A measure of intensity and activity (e.g., fast, loud, noisy).</p></li>
<li><p>Danceability: How suitable a track is for dancing based on tempo, rhythm stability, and beat strength.</p></li>
<li><p>Tempo: The overall speed of the song (measured in BPM).</p></li>
</ul>
<p>The line chart below displays how these metrics change across the 12 songs in the playlist, following the track order:</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 1: Acousticness, Energy, Danceability</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>plot1 <span class="ot">&lt;-</span> playlist_features<span class="sc">|&gt;</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, acousticness, energy, danceability) <span class="sc">|&gt;</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>name, <span class="at">names_to =</span> <span class="st">"Feature"</span>, <span class="at">values_to =</span> <span class="st">"Value"</span>) <span class="sc">|&gt;</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">name =</span> <span class="fu">factor</span>(name, <span class="at">levels =</span> playlist_features<span class="sc">$</span>name)) <span class="sc">|&gt;</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> name, <span class="at">y =</span> Value, <span class="at">color =</span> Feature, <span class="at">group =</span> Feature)) <span class="sc">+</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Playlist Feature Progression"</span>,</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Value (0 to 1)"</span>,</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Track Name"</span>,</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"Feature"</span>)</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 2: Tempo</span></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>plot2 <span class="ot">&lt;-</span> playlist_features <span class="sc">|&gt;</span></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(name, <span class="at">levels =</span> playlist_features<span class="sc">$</span>name), <span class="at">y =</span> tempo)) <span class="sc">+</span></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">group =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"steelblue"</span>, <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"steelblue"</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Tempo Progression"</span>,</span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Tempo (BPM)"</span>,</span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Track Name"</span>)</span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a>plot1 <span class="sc">/</span> plot2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/giulioorazzo\.github\.io\/STA9750-2025-SPRING\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>